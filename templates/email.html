{% extends "layout.html" %}

{% block title %}
    Email
{% endblock %}

{% block main %}
<form action="/email" method="post">
    <div>
        <p>Email.</p>
        <input id="email" autocomplete="off" autofocus class="form-control" name="email" placeholder="Email" type="text">
        <button id="updateEmail" type="submit">Update</button>
    </div>
</form>

<script>

    document.querySelector("#updateEmail").disabled = true;

    document.querySelector("#email").onkeyup = function() {
        let email = document.querySelector("#email").value;

        if (email.match(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i)) {
            document.querySelector("#updateEmail").disabled = false;
        }
        else {
            document.querySelector('#updateEmail').disabled = true;
        }
    }
</script>
{% endblock %}